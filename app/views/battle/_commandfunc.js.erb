//コマンドカードの位置をcommandpositionで受け取り、倍率をcommandrateで返す(0.23含む)
var commandrate;
var afterattack = 0.23;
var commandnp;//Npgetの位置
var starrate;//スター発生率
var commandtype;//Hit数算出のために用いられる


if(text[commandposition-1].slice(0,text[commandposition-1].length-2) == "noble"){
  commandnp = 13;
  commandtype = 4;
  if(text[commandposition-1].slice(-1) == "B"){
      commandrate = 1.5;
      starrate = 10;
  }else if(text[commandposition-1].slice(-1) == "A"){
      commandrate = 1;
      starrate = 0;
  }else if(text[commandposition-1].slice(-1) == "Q"){
      commandrate = 0.8;
      starrate = 80;
  }
}else{
  switch(commandposition){
    case 1:
    if(text[0].slice(-1) == "B"){
      if(text[1].slice(-1) == "B" && text[2].slice(-1) == "B"){
        commandrate = 1.5;//Busterチェイン
        afterattack = 0.23+0.2;
      }else{
        commandrate = 1.5+0.5;
      }
      commandnp = 14;
      starrate = 10;
    }else if(text[0].slice(-1) == "A"){
      commandrate = 1.0;
      commandnp = 0;
      starrate = 0;
    }else if(text[0].slice(-1) == "Q"){
      commandrate = 0.8;
      commandnp = 5;
      starrate = 80+20;
    }
    break;
    case 2:
    if(text[0].slice(-1) == "B"){
      if(text[1].slice(-1) == "B"){
        if(text[2].slice(-1) == "B"){//Busterチェイン
          commandrate = 1.8+0.5;
          afterattack = 0.23+0.2;
        }else{
          commandrate = 1.8+0.5;
        }
        starrate = 15;
        commandnp = 14;
      }else if(text[1].slice(-1) == "A"){
        commandrate = 1.2+0.5;
        starrate = 0;
        commandnp = 1;
      }else if(text[1].slice(-1) == "Q"){
        commandrate = 0.96+0.5;
        starrate = 130;
        commandnp = 6;
      }
    }else if(text[1].slice(-1) == "A"){
      commandrate = 1.2;
      commandnp = 1;
    }else if(text[1].slice(-1) == "Q"){
      commandrate = 0.96;
      commandnp = 6;
    }
    if(text[0].slice(-1) == "A"){
      if(text[1].slice(-1) == "B"){
        commandnp = 12;
        starrate = 15;
      }else if(text[1].slice(-1) == "A"){
        commandnp = 2;
        starrate = 0;
      }else if(text[1].slice(-1) == "Q"){
        commandnp = 7;
        starrate = 130;
      }
    }
    if(text[0].slice(-1) == "Q"){
      if(text[1].slice(-1) == "B"){
        starrate = 15+20;
      }else if(text[1].slice(-1) == "A"){
        starrate = 0+20;
      }else if(text[1].slice(-1) == "Q"){
        starrate = 130+20;
      }
    }
    break;
    case 3:
    if(text[0].slice(-1) == "B"){
      if(text[1].slice(-1) == "B"){
        if(text[2].slice(-1) == "B"){//Busterチェイン
          commandrate = 2.1+0.5;
          afterattack = 0.23+0.2;
          commandnp = 14;
        }
      }
      if(text[2].slice(-1) == "B"){
        commandrate = 2.1+0.5;
        commandnp = 14;
        starrate = 20;
      }else if(text[2].slice(-1) == "A"){
        commandrate = 1.4+0.5;
        starrate = 0;
        commandnp = 3;
      }else if(text[2].slice(-1) == "Q"){
        commandrate = 1.12+0.5;
        starrate = 180;
        commandnp = 8;
      }
    }else if(text[2].slice(-1) == "A"){
      commandrate = 1.4;
      commandnp = 3;
    }else if(text[2].slice(-1) == "Q"){
      commandrate = 1.12;
      commandnp = 8;
    }
    if(text[0].slice(-1) == "A"){
      if(text[2].slice(-1) == "B"){
        commandnp = 12;
        starrate = 20;
      }else if(text[2].slice(-1) == "A"){
        commandnp = 4;
        starrate = 0;
      }else if(text[2].slice(-1) == "Q"){
        commandnp = 9;
        starrate = 180;
      }
    }
    if(text[0].slice(-1) == "Q"){
      if(text[2].slice(-1) == "B"){
        starrate = 20+20;
      }else if(text[2].slice(-1) == "A"){
        starrate = 0+20;
      }else if(text[2].slice(-1) == "Q"){
        starrate = 180+20;
      }
    }
    break;
  }

  if(text[commandposition-1].slice(-1) == "B"){
    commandtype = 1;
  }else if(text[commandposition-1].slice(-1) == "A"){
    commandtype = 0;
  }else if(text[commandposition-1].slice(-1) == "Q"){
    commandtype = 2;
  }
}
